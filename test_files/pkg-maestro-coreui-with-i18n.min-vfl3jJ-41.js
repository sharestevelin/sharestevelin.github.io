(function(){define("modules/clean/avatar/avatar_with_default",["external/react","modules/clean/avatar/photo_avatar","modules/clean/avatar/size","modules/clean/css"],function(e,t,n,r){var s,a;return a=n.VALID_AVATAR_DIMENSIONS,e.DOM,s=e.createFactory(t),e.createClass({displayName:"AvatarWithDefault",propTypes:{alt:e.PropTypes.string,dimension:e.PropTypes.oneOf(a).isRequired,defaultAvatar:e.PropTypes.element.isRequired,onPhotoClick:e.PropTypes.func,photoUrl:e.PropTypes.string,optionalClass:e.PropTypes.string,shape:e.PropTypes.oneOf(["CIRCLE","SQUARE"]).isRequired},getDefaultProps:function(){return{shape:"CIRCLE"}},componentDidMount:function(){return r.require_css("/static/css/scooter/scooter-scoped-vfl0UVTY2.css")},render:function(){return null!=this.props.photoUrl?s({alt:this.props.alt,dimension:this.props.dimension,onClick:this.props.onPhotoClick,photoUrl:this.props.photoUrl,optionalClass:this.props.optionalClass,shape:this.props.shape}):this.props.defaultAvatar}})})}).call(this),function(){define("modules/clean/avatar/initials_avatar",["external/react","modules/clean/avatar/size","modules/clean/avatar/style","modules/clean/css"],function(e,t,n,r){var s,a,o;return s=t.VALID_AVATAR_DIMENSIONS,o=n.getClassName,a=e.DOM,e.createClass({displayName:"InitialsAvatar",propTypes:{alt:e.PropTypes.string,dimension:e.PropTypes.oneOf(s).isRequired,initials:e.PropTypes.string.isRequired,shape:e.PropTypes.oneOf(["CIRCLE","SQUARE"]).isRequired,color:e.PropTypes.string,onClick:e.PropTypes.func,optionalClass:e.PropTypes.string},componentDidMount:function(){return r.require_css("/static/css/scooter/scooter-scoped-vfl0UVTY2.css")},render:function(){var e;return e=["c-avatar--no-img","c-avatar--"+this.props.shape.toLowerCase()],null!=this.props.optionalClass&&e.push(this.props.optionalClass),null!=this.props.onClick&&this.props.alt?(e.push("u-unbutton"),a.button({className:o(this.props.dimension,e),onClick:this.props.onClick,style:this.getContainerStyle()},a.span({"aria-hidden":!0},this.props.initials),a.span({className:"ax-visually-hidden"},this.props.alt))):a.div({className:o(this.props.dimension,e),onClick:this.props.onClick,style:this.getContainerStyle()},this.props.alt?[a.span({key:"initials","aria-hidden":!0},this.props.initials),a.span({key:"alt",className:"ax-visually-hidden"},this.props.alt)]:this.props.initials)},getContainerStyle:function(){var e;return e={},this.props.color&&(e.backgroundColor=this.props.color),e}})})}.call(this),function(){define("modules/clean/avatar/photo_avatar",["external/react","modules/clean/avatar/size","modules/clean/avatar/style"],function(e,t,n){var r,s,a;return r=t.VALID_AVATAR_DIMENSIONS,n.dynamicInlineStyle,a=n.getClassName,s=e.DOM,e.createClass({displayName:"PhotoAvatar",propTypes:{alt:e.PropTypes.string,dimension:e.PropTypes.oneOf(r).isRequired,photoUrl:e.PropTypes.string.isRequired,onClick:e.PropTypes.func,optionalClass:e.PropTypes.string,shape:e.PropTypes.oneOf(["CIRCLE","SQUARE"])},getDefaultProps:function(){return{shape:"CIRCLE"}},render:function(){var e,t;return e=["c-avatar--"+this.props.shape.toLowerCase()],null!=this.props.optionalClass&&e.push(this.props.optionalClass),t=s.img({alt:this.props.alt||"",src:this.props.photoUrl,width:this.props.dimension,height:this.props.dimension}),null!=this.props.onClick&&this.props.alt?(e.push("u-unbutton"),s.button({className:a(this.props.dimension,e),onClick:this.props.onClick},t)):s.div({className:a(this.props.dimension,e),onClick:this.props.onClick},t)}})})}.call(this),function(){define("modules/clean/avatar/size",[],function(){var e,t,n;return e={XSMALL:16,SMALL:24,MEDIUM:32,LARGE:48,XLARGE:64},t=(function(){var t;t=[];for(n in e)t.push(e[n]);return t})(),{AVATAR_DIMENSION_BY_SIZE:e,VALID_AVATAR_DIMENSIONS:t}})}.call(this),function(){define("modules/clean/avatar/style",["external/classnames","external/react","modules/clean/accessibility/utils"],function(e,t,n){var r,s,a,o;return s=n.accessibleColorPalette,r={16:"c-avatar--xs",24:"c-avatar--s",32:"c-avatar--m",48:"c-avatar--l",64:"c-avatar--xl"},a=function(e){var t,n;for(null==e&&(e=""),t=5381*e.length,n=0;n<e.length;)t=e.charCodeAt(n)+((t<<6)+(t<<16)-t),n++;return t=Math.abs(t),s[t%s.length]},o=function(t,n){var s;return null==t&&(t=32),null==n&&(n=[]),s=["c-avatar",r[t]],n=n.concat(s),e.apply(this,n)},{colorValueForAvatarName:a,getClassName:o}})}.call(this),define("modules/clean/avatar/viewer_avatar",["require","exports","tslib","external/react","modules/clean/avatar/photo_avatar","modules/clean/avatar/size","modules/clean/css","modules/core/uri","modules/clean/event_handler"],function(e,t,n,r,s,a,o,i,l){"use strict";var c=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={photoUrl:n.props.photoUrl},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;o.require_css("/static/css/scooter/scooter-scoped-vfl0UVTY2.css"),this.events.on(document,"db:account_photo:photo_set",function(t,n){var r=2*e.props.dimension,s=r+"x"+r,a=i.parse(n.saved_photo_url).updateQuery({size:s}).toString();e.setState({photoUrl:a})}),this.events.on(document,"db:account_photo:photo_deleted",function(){e.setState({photoUrl:null})})},t.prototype.hasPhotoAvatar=function(){return null!=this.state.photoUrl},t.prototype.render=function(){return this.hasPhotoAvatar()?r.createElement(s,{alt:this.props.alt,dimension:this.props.dimension,onClick:this.props.onPhotoClick,photoUrl:this.state.photoUrl,optionalClass:this.props.optionalClass}):this.props.defaultAvatar},t})(r.Component);return c.displayName="ViewerAvatar",c.propTypes={dimension:r.PropTypes.oneOf(a.VALID_AVATAR_DIMENSIONS).isRequired},c=n.__decorate([l.eventHandler],c)}),function(){define("modules/clean/components/loading_indicator",["external/classnames","external/underscore","external/react","modules/clean/react_logger","modules/core/accessible_announce","modules/core/i18n"],function(e,t,n,r,s,a){var o,i,l,c,p;return l=r.ReactLogger,o=s.AccessibleAnnounce,c=a._,p=n.DOM,i={DOTS:"dots",SPINNER:"spinner",BLUE_SPINNER:"blue_spinner"},n.createClass({displayName:"LoadingIndicator",statics:{LoadingIndicatorStyle:i},propTypes:{style:n.PropTypes.oneOf(t.values(i)),className:n.PropTypes.string,startMessage:n.PropTypes.string,finishMessage:n.PropTypes.string,shouldAnnounceMessage:n.PropTypes.bool},getDefaultProps:function(){return{style:i.DOTS,className:"",startMessage:c("Loading…"),finishMessage:null,shouldAnnounceMessage:!0}},componentWillMount:function(){return l.start(this.constructor.displayName)},componentDidMount:function(){return this.props.shouldAnnounceMessage&&o.polite(this.props.startMessage),l.end(this.constructor.displayName)},componentWillUnmount:function(){if(this.props.finishMessage&&this.props.shouldAnnounceMessage)return o.polite(this.props.finishMessage)},render:function(){var n;return n={},this.props.className&&(n=t.object(this.props.className.split(" ").map(function(e){return[e,!0]}))),n=t.extend(n,{"c-loader":!0,"c-loader--spinner":this.props.style===i.SPINNER,"c-loader--spinner--blue":this.props.style===i.BLUE_SPINNER}),p.div({className:e(n)},this.props.startMessage)}})})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/clean/downloads",["jquery","modules/clean/filepath","modules/core/browser","modules/core/exception","modules/core/i18n","modules/core/notify","modules/core/uri"],function(t,n,r,s,a,o,i){var l,c,p,assert;return assert=s.assert,p=a._,c=["dl-web.dropbox.com","dl.dropboxusercontent.com"],l=p("There was an error downloading your file."),(function(){function s(){}return s.get=function(n){var a,p,u,d,h,m,f,_,y;return y=n.url,h=n.error,a=n.__do_not_use_expected_domain,d=i.parse(y),p=a||d.authority,assert(e.call(c,p)>=0),r.iOS?(assert((_=d.authority,e.call(["",window.location.host].concat(c),_)>=0)),void r.unsafeRedirect(y)):(s.initialized||s.init(),u=s._create_download_id(),f={},f._download_id=u,f._notify_domain=window.location.host,d.updateQuery(f),m=t("<iframe />",{src:String(d)}).css("display","none"),m.on("load",function(){var e;return e=function(){var e;if(e=s.current_watches[u],null!=e)return r.chrome&&(o.error(l),"function"==typeof e.error&&e.error()),s._cleanup(u)},setTimeout(e,100)}),s.current_watches[u]={origin:p,error:h,iframe:m},t("body").append(m),window.setTimeout(function(){return s._cleanup(u)},9e4),!1)},s.get_blockserver_link=function(e){var t,n,r,s,a;return a=e.url,n=e.ns_id,r=e.ns_path,t=e.error,s=i.parse(a),s.setScheme("https"),s.updateQuery({dl:1}),null!=n&&(assert("string"==typeof r,"Namespace ID was passed with invalid path, got: "+r),s.updateQuery({nsid:n}),s.updateQuery({path:r})),assert("dl-web.dropbox.com"===s.authority,"download_blockserver_url expects a blockserver resource, got: "+a),this.get({url:s.toString(),error:t})},s.zip_batch_by_ns_id=function(e){var r,s,a,o,l,c,p,u,d,h,m,f,_;for(m=e.parent_ns_id,f=e.parent_ns_path,o=e.files,_=e.subject_uid,r=e.block_hash,c=i({scheme:"https",authority:"dl-web.dropbox.com",path:"/zip_batch_by_ns_id"}).updateQuery("_subject_uid",_),c.updateQuery({parent_ns_id:m,parent_ns_path:f||"/"}),c=c.toString(),l=t("<form>",{action:c,method:"post"}),u=0,d=o.length;u<d;u++)s=o[u],a=n.filename(s.fq_path),h=f+"/"+a,p=t("<input>",{name:"ns_paths",value:h}),p.appendTo(l);return p=t("<input>",{name:"w",value:r}),p.appendTo(l),t(document.body).append(l),l.submit(),l.remove()},s.get_zip=function(e){var n,r,s,a,o,l,c,p,u,d;for(s=e.fq_paths,d=e.subject_uid,n=e.block_hash,p=e.parent_path,a=i({scheme:"https",authority:"dl-web.dropbox.com",path:"/zip_batch"}).updateQuery("_subject_uid",d).toString(),u=t("<form>",{action:a,method:"post"}),l=0,c=s.length;l<c;l++)r=s[l],o=t("<input>",{name:"files",value:r}),o.appendTo(u);return o=t("<input>",{name:"parent_path",value:p||"/"}),o.appendTo(u),o=t("<input>",{name:"w",value:n}),o.appendTo(u),t(document.body).append(u),u.submit(),u.remove()},s.init=function(){return s.initialized=!0,s.current_watches={},t(window).on("message",s._post_handler)},s._post_handler=function(t){var n,r,a,p;if(n=i.parse(t.originalEvent.origin),"https"===n.scheme&&(a=n.authority,!(e.call(c,a)<0))){try{r=JSON.parse(t.originalEvent.data)}catch(e){return}if(null!=(null!=r?r.download_id:void 0)&&(p=s.current_watches[r.download_id],null!=p&&n.authority===p.origin&&t.originalEvent.source===p.iframe[0].contentWindow))return"failed"===r.status&&(o.error(r.message||l),"function"==typeof p.error&&p.error()),s._cleanup(r.download_id)}},s._cleanup=function(e){var t;if(t=this.current_watches[e],null!=t)return t.iframe.remove(),delete this.current_watches[e]},s._create_download_id=function(){var e,t;for(t="",e=1;e<=4;++e)t+=String(Math.random()).split(".")[1];return t},s})()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/legacy_pyxl_controllers/ajax_form",["jquery","modules/core/controller_helpers","modules/core/exception","modules/core/html","modules/core/i18n","modules/core/notify","modules/clean/ajax","modules/clean/validators/validators"],function(t,n,r,s,a,o,i,l){var c,assert;return assert=r.assert,c=a._,(function(){function r(t,r,s){this.$container=t,this.do_before_submitting=r,this._clear_pending=e(this._clear_pending,this),this._clear_errors=e(this._clear_errors,this),this._handle_errors=e(this._handle_errors,this),this._on_error=e(this._on_error,this),this._on_success=e(this._on_success,this),this._submit_form=e(this._submit_form,this),this._install_schema=e(this._install_schema,this),this.add_additional_data=e(this.add_additional_data,this),this.additional_data={},s=s||{},"FORM"===this.$container.prop("tagName")?this.$form=this.$container:this.$form=this.$container.find("form"),this.$form.submit(this._submit_form),this.$submit_button=this.$form.find("[type='submit']"),n.deprecated_set_controller(this.$form,this),this.schema={},this.should_validate=s.client_side_validation,this.should_submit_once=s.should_submit_once,this.error_handler="function"==typeof s.error_handler&&s.error_handler,this.should_validate&&this._fetch_schema()}return r.SUCCESS_EVENT="db:ajaxform:success",r.ERROR_EVENT="db:ajaxform:error",r.extract_errors=function(e){if(0!==e.indexOf("err:"))return!1;e=e.substr(4);try{return JSON.parse(e)}catch(t){return t,"string"==typeof e?e:c("There was a problem completing this request.")}},r.clear_errors=function(e){return e.find(".input-error").removeClass("input-error"),e.find(".error-message").remove()},r.clear_error=function(e,t){var n;return n=e.find("input[name='"+t+"'], input[data-encrypted-name='"+t+"']"),n.removeClass("input-error"),e.find("[data-error-field-name='"+t+"']").prev(".error-message").remove()},r.fill_errors=function(e,n){var r,s,a,o;e.find(".c-card").addClass("u-l-dn"),a=[];for(s in n)o=n[s],r=t("<span>",{class:"error-message"}),o.message_html?r.html(o.message_html):r.text(o.message_text),r.insertBefore(e.find("[data-error-field-name='"+s+"']")),e.find("input[name='"+s+"'], input[data-encrypted-name='"+s+"']").addClass("input-error"),"failed-login-invalid-email-password"===s?a.push(e.find(".c-card").removeClass("u-l-dn")):a.push(void 0);return a},r.prototype.add_additional_data=function(e){return t.extend(this.additional_data,e)},r.prototype._install_schema=function(e){var n;try{n=JSON.parse(e)}catch(e){e}return t.each(n,(function(e){return function(t,n){if(n)return e.schema[t]=l.create(n)}})(this))},r.prototype._fetch_schema=function(){return i.ValidationSchemaRequest({url:this.$form.attr("action"),success:(function(e){return function(t){return e._install_schema(t)}})(this)})},r.prototype.reset=function(){var e,n,r,s,a;for(s=this.$form.find("input"),a=[],e=0,r=s.length;e<r;e++)n=s[e],a.push(t(n).closest(".text-input").val(n.defaultValue));return a},r.prototype.set_input_value=function(e,t){return this.$form.find("input[name='"+e+"']").closest(".text-input").val(t)},r.prototype._get_form_data=function(){var e,n,r,s,a,o,i,l,c,p,u;for(e={},c=this.$form.find("input, select, textarea").not(":disabled").not(":radio"),n=0,o=c.length;n<o;n++)r=c[n],l=t(r).attr("name"),l&&(s=t(r).attr("type"),u="checkbox"===s?t(r).prop("checked")?"True":"":t(r).val(),"radio"!==s&&assert(!(l in e),"found multiple inputs with the same name"),e[l]=u);for(p=this.$form.find("input:radio:checked:not(disabled)"),a=0,i=p.length;a<i;a++)r=p[a],l=t(r).attr("name"),e[l]=t(r).val();return e},r.prototype._validate=function(e){var n,r;return this.should_validate?(n={},r=!0,t.each(e,(function(t){return function(s,a){var o;if(t.schema[s])try{return t.schema[s].validate(a,{field:s,data:e,errors:n})}catch(e){return o=e,r=!1,n[s]={message_text:o.message}}}})(this)),r?null:n):null},r.prototype._submit_form=function(e){var t;return e.preventDefault(),"function"==typeof this.do_before_submitting&&this.do_before_submitting(),this._clear_errors(),this.$form.prop("disabled",!0),this.$form.addClass("ajax-loading"),this.$submit_button.prop("disabled",!0),t=this._validate(this._get_form_data()),t?this._handle_errors(t):this.send_request()},r.prototype.send_request=function(){var e;return e=this._get_form_data(),t.extend(e,this.additional_data),i.FormWebRequest({url:this.$form.attr("action"),data:e,success:this._on_success,error:this._on_error,complete:this._on_complete,skipErrorHandling:!0})},r.prototype._on_success=function(e,t,n){var s,a,o;if(o=n.responseText,s=r.extract_errors(o),s!==!1)return void this._handle_errors(s);try{a=JSON.parse(o)}catch(e){return e,void this._on_error()}return this.$form.trigger(r.SUCCESS_EVENT,a),this._clear_pending(!this.should_submit_once)},r.prototype._on_error=function(){return this.$form.trigger(r.ERROR_EVENT),o.error(c("There was a problem completing this request.")),this._clear_pending(!0)},r.prototype._handle_errors=function(e){if(this.error_handler)this.error_handler(e);else{if("string"==typeof e)return o.error(new s(e)),void this._clear_pending(!0);r.fill_errors(this.$form,e)}return this._clear_pending(!0),this.$form.trigger(r.ERROR_EVENT,e)},r.prototype._clear_errors=function(){return this.$form.find(".error-message").remove(),this.$form.find("input").removeClass("input-error")},r.prototype._clear_pending=function(e){if(this.$form.removeClass("ajax-loading"),e)return this.$form.prop("disabled",!1),this.$submit_button.prop("disabled",!1)},r})()})}.call(this),define("modules/clean/react/calendar",["require","exports","tslib","external/classnames","external/mcl/dropdown_button","external/react","external/react-dom","modules/clean/datetime","modules/clean/react/css","modules/clean/react/sprite","modules/core/i18n"],function(e,t,n,r,s,a,o,i,l,c,p){"use strict";function u(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var d=function(){},h=0,m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentDate:t.props.initDate,calendarIsVisible:t.props.calendarIsInitiallyVisible},t.setCalendarDateViewRef=function(e){t.refCalendarDateView=o.findDOMNode(e)},t.setCalendarViewRef=function(e){t.refCalendarView=o.findDOMNode(e)},t._handleDocumentClick=function(e){if(t.refCalendarView&&t.refCalendarDateView){var n=e.target;!t.state.calendarIsVisible||t.refCalendarView.contains(n)||t.refCalendarDateView.contains(n)||(e.preventDefault(),e.stopPropagation(),t.closeCalendar())}},t.toggleCalendarView=function(){t.setState({calendarIsVisible:!t.state.calendarIsVisible})},t.handleDateSelected=function(e){t.setState({currentDate:e}),t.props.onDateChange(e),t.closeCalendar()},t.closeCalendar=function(){t.setState({calendarIsVisible:!1}),t.refCalendarDateView&&t.refCalendarDateView.focus()},t._startOfDay=function(e){var t=new Date(e.getTime());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this._handleDocumentClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleDocumentClick)},t.prototype.render=function(){var e,t={"c-datepicker":!0,"scooter-css u-l-fl clearfix":!this.props.isMaestroDesign};return this.state.calendarIsVisible&&(e=a.createElement(_,{ref:this.setCalendarViewRef,alignAtLeft:this.props.alignAtLeft,firstDay:this._startOfDay(this.props.firstDay),lastDay:this._startOfDay(this.props.lastDay),initDate:this.state.currentDate,onDateChange:this.handleDateSelected,onEscapePressed:this.closeCalendar})),a.createElement("div",{className:r(t)},a.createElement(f,{date:this.state.currentDate,ref:this.setCalendarDateViewRef,calendarVisible:this.state.calendarIsVisible,disabled:this.props.disabled,isMaestroDesign:this.props.isMaestroDesign,onClick:this.toggleCalendarView}),e)},t})(a.Component);m.displayName="Calendar",m.defaultProps=(function(){var e=new Date,t=new Date(e.getTime());t.setFullYear(t.getFullYear()-1);var n=new Date(e.getTime());return n.setFullYear(n.getFullYear()+1),{disabled:!1,initDate:e,isMaestroDesign:!1,firstDay:t,lastDay:n,alignAtLeft:!0,onDateChange:d,calendarIsInitiallyVisible:!1}})();var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._date_to_string=function(e){return i.format_date(e,i.localized_date_format)},t.renderLegacyCaret=function(){return a.createElement(c,{group:"web",name:"calendar_view_month",className:"u-l-fr",alt:t.props.description})},t}return n.__extends(t,e),t.prototype.render=function(){var e={"is-active":this.props.calendarVisible,"c-input":!this.props.isMaestroDesign,"filter-item__filter-input":this.props.isMaestroDesign};if(this.props.isMaestroDesign)return a.createElement(s.DropdownButton,{disabled:this.props.disabled,onClick:this.props.onClick,"aria-expanded":this.props.calendarVisible},this._date_to_string(this.props.date));var t=a.createElement("span",{className:"c-calendar__date-text"},this._date_to_string(this.props.date));return a.createElement("button",{className:r(e),disabled:this.props.disabled,onClick:this.props.onClick,"aria-expanded":this.props.calendarVisible},this.renderLegacyCaret(),t)},t})(a.Component);f.displayName="CalendarDateView",f.defaultProps={isMaestroDesign:!1,calendarVisible:!0,onClick:function(){},disabled:!1,description:p._("Change deadline")};var _=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={viewDate:n.props.initDate,currentlyActiveDate:n.props.initDate},n.clampToFirstLastDate=function(e){e<n.props.firstDay?e.setTime(n.props.firstDay.getTime()):e>n.props.lastDay&&e.setTime(n.props.lastDay.getTime())},n.getDaysInMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},n.setPrevMonthButtonRef=function(e){n.refPrevButton=e},n.setNextMonthButtonRef=function(e){n.refNextButton=e},n.setCurrentDayButtonRefAndMaintainFocus=function(e){var t=document.activeElement&&document.activeElement.getAttribute("data-day-in-month");n.refCurrentDayButton=e,n.refCurrentDayButton&&t&&n.refCurrentDayButton.focus()},n.handleDayClicked=function(e){var t=e.target,r=parseInt(t.getAttribute("data-day-in-month")||"",10),s=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),r);n.setState({currentlyActiveDate:s}),n.props.onDateChange(s)},n.handleKeyDownOnDay=function(e){if(27===e.which)return n.props.onEscapePressed(),void e.preventDefault();if(9===e.which){var t=void 0,r=n.refNextButton.classList.contains("u-l-dn")?null:n.refNextButton,s=n.refPrevButton.classList.contains("u-l-dn")?null:n.refPrevButton;return t=e.shiftKey?r||s:s||r,t&&t.focus(),void e.preventDefault()}if([38,39,40,37].indexOf(e.which)!==-1){var a=n.getDaysInMonth(n.props.initDate),o=(n.state.currentlyActiveDate||n.props.initDate).getDate(),i=null;switch(e.which){case 38:i=Math.max(1,o-7);break;case 39:i=Math.min(a,o+1);break;case 40:i=Math.min(a,o+7);break;case 37:i=Math.max(1,o-1)}if(null!=i){var l=new Date(n.state.viewDate.getTime());l.setDate(i),n.clampToFirstLastDate(l),n.setState({currentlyActiveDate:l})}e.preventDefault()}},n.renderDay=function(e,t){var s=!t;n.props.lastDay&&(t=t||e>n.props.lastDay),n.props.firstDay&&(t=t||e<n.props.firstDay);var o=u(n.state.currentlyActiveDate,e),l=u(n.props.initDate,e),c={"button-as-link":!t,"c-calendar__date":!0,"c-calendar__date--disabled":t,"current-month":s,"c-calendar__date--was-initially-active":l,"c-calendar__date--is-active":o},p=d;u(n.state.currentlyActiveDate,e)&&(p=n.setCurrentDayButtonRefAndMaintainFocus);var h="day"+e.getDate()+"-"+e.getMonth(),m=i.nice_date_with_month_name(e,!0,!0,!0);return a.createElement("td",{key:h},a.createElement("button",{className:r(c),disabled:t,onClick:t?void 0:n.handleDayClicked,onKeyDown:n.handleKeyDownOnDay,"data-day-in-month":e.getDate(),"aria-label":m,ref:p},e.getDate()))},n.renderDays=function(){for(var e=[],t=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),1),r=t.getDay(),s=r;s>0;s--){var o=new Date(t.getFullYear(),t.getMonth(),t.getDate());o.setDate(o.getDate()-s),e.push(n.renderDay(o,!0))}for(var i=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),1);i.getMonth()===n.state.viewDate.getMonth();)e.push(n.renderDay(i)),i=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),i.getDate()+1);for(var l=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth()+1,0);6!==l.getDay();)l=new Date(l.getFullYear(),l.getMonth(),l.getDate()+1),e.push(n.renderDay(l,!0));var c=[],p=[];return e.forEach(function(e,t){p.push(e),(t+1)%7===0&&(c.push(a.createElement("tr",{key:"week-"+t},p)),p=[])}),c},n.offsetViewDateByMonth=function(e){n.setState({viewDate:new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth()+e,1)})},n.handleClickNextMonth=function(){n.offsetViewDateByMonth(1)},n.handleClickPrevMonth=function(){n.offsetViewDateByMonth(-1)},n.handleKeyDownMonthButton=function(e){if(27===e.which)return n.props.onEscapePressed(),void e.preventDefault();if(9===e.which){var t=!e.shiftKey,r=void 0,s=n.refNextButton.classList.contains("u-l-dn")?void 0:n.refNextButton,a=n.refPrevButton.classList.contains("u-l-dn")?void 0:n.refPrevButton,o=n.refCurrentDayButton;r=e.target===n.refPrevButton?t?s||o:o||s:t?o||a:a||o,r&&r.focus(),e.preventDefault()}},n.renderMonthChangers=function(){var e=[],t=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),1),s=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),n.getDaysInMonth(n.state.viewDate)),o={"arrow-select":!0,"u-l-dn":t<=n.props.firstDay,"ax-focusable":!0,"u-l-fl":!0};e.push(a.createElement("button",{className:r(o),onClick:n.handleClickPrevMonth,ref:n.setPrevMonthButtonRef,onKeyDown:n.handleKeyDownMonthButton},a.createElement("span",{className:"c-arrow c-arrow--left u-thide"},p._("Previous month"))));var i={"arrow-select":!0,"u-l-dn":s>=n.props.lastDay,"ax-focusable":!0,"u-l-fr":!0};return e.push(a.createElement("button",{className:r(i),onClick:n.handleClickNextMonth,ref:n.setNextMonthButtonRef,onKeyDown:n.handleKeyDownMonthButton},a.createElement("span",{className:"c-arrow c-arrow--right u-thide"},p._("Next month")))),e},n.renderWeekdayRows=function(){return[p._("Sunday"),p._("Monday"),p._("Tuesday"),p._("Wednesday"),p._("Thursday"),p._("Friday"),p._("Saturday")].map(function(e){return a.createElement("th",{key:e},a.createElement("abbr",{title:e},e.slice(0,3)))})},n.calendarId=++h,n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.refCurrentDayButton&&this.refCurrentDayButton.focus()},t.prototype.componentWillUpdate=function(e,t){if(t.viewDate&&t.viewDate.getMonth()!==this.state.viewDate.getMonth()){var n=new Date(t.viewDate.getTime()),r=this.getDaysInMonth(t.viewDate);n.setDate(Math.min(r,this.state.currentlyActiveDate.getDate())),this.clampToFirstLastDate(n),this.setState({currentlyActiveDate:n})}},t.prototype.render=function(){var e={"c-calendar":!0,"c-card":!0,"u-pad-xs":!0,"u-left":this.props.alignAtLeft,"u-right":!this.props.alignAtLeft},t="calendar-header-"+ ++this.calendarId,n=this.renderMonthChangers(),s=n[0],o=n[1],l=a.createElement("strong",{id:t,"aria-live":"assertive","aria-atomic":"true"},p._("%(month)s %(year)s",{comment:"For example 'January 2010'. This is used as part of a calendar."}).format({month:i.month_name(this.state.viewDate.getMonth()),year:this.state.viewDate.getFullYear()}));return a.createElement("div",{className:r(e)},a.createElement("div",{className:"c-calendar__nav u-mar-bottom-s u-font-center u-cf"},s,o,l),a.createElement("table",{className:"c-calendar__picker"},a.createElement("thead",{className:"ax-visually-hidden"},a.createElement("tr",null,this.renderWeekdayRows())),a.createElement("tbody",null,this.renderDays())))},t})(a.Component);_.displayName="CalendarView",_.defaultProps={onDateChange:d,onEscapePressed:d,alignAtLeft:!1},t.CalendarView=_,t.Calendar=l(m,["/static/css/scooter/scooter-scoped-vfl0UVTY2.css","/static/css/components/calendar-vflO2TC4l.css"])}),function(){var e=[].slice;define("modules/clean/react/file_path_breadcrumb",["jquery","external/underscore","external/classnames","external/react","modules/core/i18n","modules/clean/em_string","modules/clean/react_logger","modules/clean/viewer"],function(t,n,r,s,a,o,i,l){var c,p,u,d,h;return a._,p=i.ReactLogger,u=s.DOM,c=100,h=function(e){return Math.floor(1e3*e)},d=function(e){return e/1e3},s.createClass({displayName:"FilePathBreadcrumb",propTypes:{paths:s.PropTypes.arrayOf(s.PropTypes.shape({name:s.PropTypes.string.isRequired,url:s.PropTypes.string.isRequired})).isRequired,pathClassname:s.PropTypes.string,handlePathClick:s.PropTypes.func,maxWidth:s.PropTypes.number,minPathWidth:s.PropTypes.number,morePathsString:s.PropTypes.string,pathDividerWidth:s.PropTypes.number,viewingUserId:s.PropTypes.number.isRequired,useLinks:s.PropTypes.bool},getDefaultProps:function(){return{pathClassname:"recents-item__subheading-path",maxWidth:46,minPathWidth:3,morePathsString:"…",pathDividerWidth:1.077,handlePathClick:n.noop,useLinks:!0}},componentWillMount:function(){return p.start(this.constructor.displayName)},componentDidMount:function(){return p.end(this.constructor.displayName)},_handlePathClick:function(e){return this.props.handlePathClick(e)},_getTotalPathWidth:function(e){var t,n,r,s,a,o;for(o=0,a=h(this.props.pathDividerWidth),t=n=0,r=e.length;n<r;t=++n)s=e[t],o+=s.workingWidth,t<e.length-1&&(o+=a);return o},_createPathMetadata:function(e){var t;return t=new o(e.name).length,{name:e.name,href:e.url,width:t,workingWidth:h(t)}},_getPathsAvailable:function(){return this.props.paths.length>1?this.props.paths.slice(1):this.props.paths},_getPathsToShow:function(){var e,t,r,s,a,o,i,p,u,m,f,_,y,v,g,D,b,w,C,T,P,M;for(_=h(this.props.minPathWidth),g=h(this.props.pathDividerWidth),e=h(this.props.maxWidth),M=l.get_viewer(),M.get_user_by_id(this.props.viewingUserId),w=[],b=this._getPathsAvailable(),s=o=0,f=b.length;o<f;s=++o)v=b[s],D=this._createPathMetadata(v),w.push(D);for(P=function(){var t;return t=n.last(w),t.width=d(e),t.workingWidth=e,[t]},y=1,a=0;this._getTotalPathWidth(w)>e;){if(a++>c)return P();if(y+1<w.length)t=w[0],T=this._createPathMetadata({name:this.props.morePathsString}),r=[t,T],m=w.slice(y+1,w.length),w=r.concat(m),y++;else{if(1===w.length)return P();for(u=e,s=i=0,C=w.length-1;0<=C?i<C:i>C;s=0<=C?++i:--i)v=w[s],u-=v.workingWidth+g;if(u<_)return P();p=n.last(w),p.width=d(u),p.workingWidth=u}}return w},_renderPaths:function(){var t,n;return t=this._handlePathClick,n=this._getPathsToShow().map((function(e){return function(n){var s,a;return a=o.em_snippet(n.name,n.width),s=[e.props.pathClassname],n.href&&e.props.useLinks?u.a({href:n.href,className:r.apply(null,s),onClick:t},a):(s.push(e.props.pathClassname+"--more"),u.span({className:r.apply(null,s)},a))}})(this)),u.span.apply(u,[null].concat(e.call(n)))},render:function(){return this._renderPaths()}})})}.call(this),function(){define("modules/clean/react/modal",["external/classnames","external/react","external/react-dom","external/purify","jquery","modules/core/i18n","modules/core/dom","modules/clean/react/button","modules/clean/static_urls","modules/clean/keycode"],function(e,t,n,r,s,a,o,i,l,c){var p,u,d,h,m,f,_,y,v,g,D,b;return _=a._,v=i.button,b=l.static_url,p=c.KeyCode,D=t.DOM,g=t.createElement,u="react-modal-root",y=function(e){var t,n;return null==e&&(e=!0),t=u,n=s("#"+t),!n.length&&e&&(n=s("<div />").attr({id:t}).prependTo("body")),n[0]},d=t.createClass({displayName:"Modal",statics:{showInstance:function(e,t){var r;return null==t&&(t=!0),r=y(),t&&(n.unmountComponentAtNode(r),s(r).siblings().not("#accessible-announce").attr("aria-hidden",!0)),n.render(e,r)},close:function(e){var t;t=y(),t&&(n.unmountComponentAtNode(t),s(t).siblings().removeAttr("aria-hidden"),null!=e&&e.focus())},unhide:function(){var e;if(e=y())return s(e).show()},hide:function(){var e;if(e=y())return s(e).hide()}},propTypes:{width:t.PropTypes.number,submitting:t.PropTypes.bool,title:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.element]),acceptButtonText:t.PropTypes.string,dismissButtonText:t.PropTypes.string,acceptButtonImportance:t.PropTypes.string,dismissButtonImportance:t.PropTypes.string,altAction:t.PropTypes.node,trackingIdPrefix:t.PropTypes.string,headerId:t.PropTypes.string,onAccept:t.PropTypes.func,onDismiss:t.PropTypes.func,onDismissCompleted:t.PropTypes.func,onShow:t.PropTypes.func,buttonComponent:t.PropTypes.element,autoClose:t.PropTypes.bool,clickOutToClose:t.PropTypes.bool,showX:t.PropTypes.bool,escapeOrBackspaceToClose:t.PropTypes.bool,showButtonDivider:t.PropTypes.bool,acceptButtonDisabled:t.PropTypes.bool,dismissButtonDisabled:t.PropTypes.bool,autoFocusPrimaryInput:t.PropTypes.bool,style:t.PropTypes.oneOf(["default","default-maestro","clean","simple","lightbox","bare"]),setMaxHeight:t.PropTypes.bool,className:t.PropTypes.string},close:function(){return d.close(this.elementToFocusOnClose)},_invokeCallbackAndClose:function(e,t,n){if(null!=e&&"function"==typeof e.call&&e.call(this,t),!t.isDefaultPrevented())return this.props.autoClose||n?this.close():void 0},_dismiss:function(e){var t;this._invokeCallbackAndClose(this.props.onDismiss,e,!0),
null!=(t=this.props.onDismissCompleted)&&"function"==typeof t.call&&t.call(this,e)},_accept:function(e){this._invokeCallbackAndClose(this.props.onAccept,e,!1)},_onClickOnOverlay:function(e){this.props.clickOutToClose&&this._dismiss(e)},getDefaultProps:function(){return{acceptButtonText:_("OK"),acceptButtonImportance:"primary",dismissButtonImportance:"tertiary",dismissButtonText:null,buttonComponent:null,headerId:"db-modal-title",onAccept:function(){},onDismiss:function(){},onShow:function(){},autoClose:!0,clickOutToClose:!0,style:"default",showX:!0,escapeOrBackspaceToClose:!0,acceptButtonDisabled:!1,dismissButtonDisabled:!1,autoFocusPrimaryInput:!0}},_focus:function(){var e,t,r,a;return this.elementToFocusOnClose=document.activeElement,e=s(n.findDOMNode(this.refs.modal)),this.props.autoFocusPrimaryInput&&(t=e.find("input:not(:disabled)").first(),r=null!=this.refs.primaryButton&&s(n.findDOMNode(this.refs.primaryButton)),a=null!=this.refs.tertiaryButton&&s(n.findDOMNode(this.refs.tertiaryButton)),t.length?e=t:r.length&&!r.is(":disabled")?e=s(n.findDOMNode(this.refs.primaryButton)):a.length&&!a.is(":disabled")&&(e=s(n.findDOMNode(this.refs.tertiaryButton)))),e.focus()},_keyDown:function(e){if(e.which===p.ESC&&(e.stopPropagation(),this.props.escapeOrBackspaceToClose&&this._dismiss(e)),e.which!==p.BACKSPACE||o.focus_in_input()||(e.preventDefault(),this.props.escapeOrBackspaceToClose&&this._dismiss(e)),null!=this.refs.modal)return o.keepFocusIn(n.findDOMNode(this.refs.modal),e)},_trackingId:function(e){return null!=this.props.trackingIdPrefix?this.props.trackingIdPrefix+"-"+e:null},_renderAcceptButton:function(){return g(v,{ref:"primaryButton",key:"primary",className:"dbmodal-button","data-trackingid":this._trackingId("accept"),importance:this.props.acceptButtonImportance,disabled:this.props.acceptButtonDisabled,onClick:this._accept},this.props.acceptButtonText)},_renderDismissButton:function(){return g(v,{ref:"tertiaryButton",key:"tertiary-dismiss",className:"dbmodal-button","data-trackingid":this._trackingId("dismiss"),importance:this.props.dismissButtonImportance,disabled:this.props.dismissButtonDisabled,onClick:this._dismiss},this.props.dismissButtonText)},_renderButtons:function(){var e;return this.props.buttonComponent?this.props.buttonComponent:(e=[],this.props.submitting&&e.push(D.span({className:"dbmodal-loading",key:"loading"},D.img({src:b("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),alt:_("Loading")}))),"default-maestro"===this.props.style?(this.props.dismissButtonText&&e.push(this._renderDismissButton()),this.props.acceptButtonText&&e.push(this._renderAcceptButton())):(this.props.acceptButtonText&&e.push(this._renderAcceptButton()),this.props.dismissButtonText&&e.push(this._renderDismissButton())),e.length?D.div({className:"db-modal-buttons"},this.props.showButtonDivider?D.hr({}):void 0,e):void 0)},_renderAltAction:function(){if(this.props.altAction)return D.div({className:"db-modal__alt-action"},this.props.altAction)},componentDidMount:function(){var e;return s(document).trigger("modalOpened",this),o.scroll_lock_document(),s(n.findDOMNode(this.refs.modal)).on("keydown",this._keyDown),this._focus(),"function"==typeof(e=this.props).onShow?e.onShow():void 0},componentWillUnmount:function(){return s(document).trigger("modalClosed",this),o.scroll_unlock_document(),s(n.findDOMNode(this.refs.modal)).off("keydown",this._keyDown)},render:function(){var t,n,r,s;return n={"db-modal-wrapper":!0,"db-modal--clean-style":"clean"===this.props.style,"db-modal--simple-style":"simple"===this.props.style,"db-modal--lightbox-style":"lightbox"===this.props.style,"db-modal--bare-style":"bare"===this.props.style,"db-modal--default-maestro-style":"default-maestro"===this.props.style},null!=this.props.className&&(n[this.props.className]=!0),t=e(n),r=this.props.width?{width:this.props.width+"px"}:{},D.div({className:t},D.div({className:"db-modal-overlay",onClick:this._onClickOnOverlay}),D.div({ref:"modal",className:"db-modal",tabIndex:-1,style:r,role:"dialog","aria-labelledby":"lightbox"===this.props.style?"":this.props.headerId},D.div({className:"db-modal-box",ref:"modalBox"},"lightbox"===(s=this.props.style)||"bare"===s?D.div({className:"db-modal-"+this.props.style},this.props.children):D.div({},!this.props.showX||"default-maestro"===this.props.style&&"change-email-modal--maestro"!==this.props.className?void 0:D.button({className:"db-modal-x",onClick:this._dismiss,"aria-label":_("Close"),"data-trackingid":this._trackingId("dismiss")}),D.h2({id:"db-modal-title",className:"db-modal-title"},D.div({className:"db-modal-title-text",ref:"title"},this.props.title)),D.div({className:"db-modal-content clearfix",ref:"content"},this.props.children,this._renderButtons(),this._renderAltAction())))))}}),m=t.createClass({displayName:"ModalButtons",render:function(){var t,n,r,s;r={},n=this.props;for(t in n)s=n[t],r[t]=s;return r.className=e(this.props.className,"db-modal-buttons"),D.div(r)}}),h=t.createClass({displayName:"ModalButton",propTypes:{importance:t.PropTypes.oneOf(["primary","secondary","tertiary"])},getDefaultProps:function(){return{importance:"primary"}},render:function(){var t,n,r,s;r={},n=this.props;for(t in n)s=n[t],"importance"!==t&&(r[t]=s);return r.className=e(this.props.className,"dbmodal-button","button-"+this.props.importance),D.button(r)}}),f={show:function(e){var n,s;return s={acceptButtonText:e.confirm_text,trackingIdPrefix:e.trackingIdPrefix,onAccept:e.confirm_callback,dismissButtonText:e.cancel_text,onDismiss:e.cancel_callback,onDismissCompleted:e.cancel_completed_callback,title:e.title_text,width:e.width,className:"simple-modal",autoClose:e.autoclose,style:e.style,onShow:e.on_show},n=g(d,s,t.DOM.div({className:"simple-modal-content",dangerouslySetInnerHTML:{__html:r.sanitize(e.body_html)}})),d.showInstance(n)}},{Modal:d,SimpleModal:f,ModalButtons:m,ModalButton:h,ReactModal:d}})}.call(this);
//# sourceMappingURL=pkg-maestro-coreui-with-i18n.min.js-vfl4SFYzE.map